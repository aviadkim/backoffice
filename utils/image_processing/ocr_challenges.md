# אתגרים בזיהוי טקסט ומספרי ISIN במסמכים סרוקים

## סיכום המצב הנוכחי

לאחר הרצת מספר תרחישי OCR על המסמך "mes 28.2.25.pdf", נתקלנו במספר אתגרים משמעותיים:

1. **איכות הטקסט המזוהה נמוכה מאוד** - הטקסט שזוהה כולל בעיקר תווים אקראיים, מספרים ואותיות ללא משמעות.
2. **אי-זיהוי של מספרי ISIN** - למרות מאמצים בעמודים שונים (כולל עמוד 9), לא הצלחנו לזהות מספרי ISIN תקינים.
3. **מספר רב של סגמנטים של טקסט** - למרות מספר גדול של סגמנטים שזוהו (עד 215 בעמוד אחד), איכות הזיהוי נמוכה.

## גורמים אפשריים לבעיות

1. **איכות המסמך המקורי** - ייתכן שהמסמך הסרוק באיכות נמוכה או במבנה שקשה למנועי OCR לפענח.
2. **פונטים מורכבים** - פונטים מסוימים קשים יותר לזיהוי באמצעות OCR.
3. **מבנה מסמך מורכב** - טבלאות, עמודות, תיבות וגרפיקה מקשים על זיהוי הטקסט.
4. **רקע ו/או צבעים** - רקעים לא אחידים או צבעוניות מקשים על זיהוי הטקסט.
5. **הגנות במסמך** - חלק מהמסמכים הפיננסיים כוללים הגנות מפני העתקה שמקשות על OCR.

## שלבים להמשך

1. **בדיקה ידנית של התמונות** - לבדוק ידנית את התמונות המקוריות כדי לוודא שאכן קיימים מספרי ISIN.
2. **שיפור קדם-עיבוד תמונה** - שיפור הקונטרסט, הפחתת רעש, התמקדות באזורים ספציפיים.
3. **ניסוי מנועי OCR נוספים**:
   - Mistral API עם הנחיות ספציפיות לזיהוי ISIN
   - Google Vision API
   - AWS Textract
   - ABBYY FineReader (פתרון מסחרי עם יכולות OCR מתקדמות)
4. **זיהוי תבניות** - שימוש בביטויים רגולריים לזיהוי תבניות של מספרי ISIN (בפורמט XX0000000000).
5. **חלוקת העמוד** - חלוקת העמוד לאזורים קטנים יותר ועיבוד כל אזור בנפרד.

## לקחים מהניסיון שלנו עם `corner.png`

בעבודה על קובץ `corner.png`, הצלחנו להשיג תוצאות טובות יותר באמצעות:

1. **שילוב של מספר שיטות עיבוד תמונה** - שימוש בשיטות שונות (אדפטיבי, אוטסו, בינארי) והשוואת התוצאות.
2. **שימוש ב-Mistral API** - השגנו תוצאות טובות יותר באמצעות Mistral API לזיהוי מספרים ומזהים.
3. **זיהוי מספרים לפני זיהוי ISIN** - זיהוי כל המספרים במסמך ואז סינון לפי תבנית ISIN.
4. **סגמנטציה של התמונה** - חילקנו את התמונה לאזורים קטנים יותר לזיהוי ממוקד.

## המלצות להמשך

1. **שיפור איכות המסמכים** - במידת האפשר, להשיג גרסאות דיגיטליות מקוריות של המסמכים.
2. **שילוב נוסף של כלים** - לשלב כלים נוספים כמו זיהוי טבלאות וזיהוי אוטומטי של מבנה המסמך.
3. **התמקדות בעמודים ובאזורים ספציפיים** - לאתר את האזורים שבהם יש סבירות גבוהה למציאת מספרי ISIN.
4. **שיפור מערך העיבוד** - לשלב מכונת לימוד לזיהוי אזורים רלוונטיים במסמך לפני ביצוע OCR.
5. **בניית מסד נתונים של דוגמאות** - למידה מדוגמאות של מסמכים דומים לשיפור הזיהוי. 